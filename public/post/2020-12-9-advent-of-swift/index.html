<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>Advent of Swift | My New Hugo Site</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="Like so many of my potential readers I’m participating in this year’s advent of code. This presents me with an opportunity to learn Swift, Apple’s app-oriented language and successor to Objective-C. There are always challenges learning a new language, and I expected those, what surprised me was how far Swift is from my daily drivers: JavaScript and PHP, and my go to “toy” language, Python. (Toy, as in, I almost never finish a Python project, not that the language is a toy).">
    <meta name="generator" content="Hugo 0.91.2" />
    
    
      <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">
    

    
<link rel="stylesheet" href="/ananke/css/main.min.css" >



    
    
    
      

    

    
    
    <meta property="og:title" content="Advent of Swift" />
<meta property="og:description" content="Like so many of my potential readers I’m participating in this year’s advent of code. This presents me with an opportunity to learn Swift, Apple’s app-oriented language and successor to Objective-C. There are always challenges learning a new language, and I expected those, what surprised me was how far Swift is from my daily drivers: JavaScript and PHP, and my go to “toy” language, Python. (Toy, as in, I almost never finish a Python project, not that the language is a toy)." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://example.org/post/2020-12-9-advent-of-swift/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2020-12-09T00:00:00+00:00" />
<meta property="article:modified_time" content="2020-12-09T00:00:00+00:00" />

<meta itemprop="name" content="Advent of Swift">
<meta itemprop="description" content="Like so many of my potential readers I’m participating in this year’s advent of code. This presents me with an opportunity to learn Swift, Apple’s app-oriented language and successor to Objective-C. There are always challenges learning a new language, and I expected those, what surprised me was how far Swift is from my daily drivers: JavaScript and PHP, and my go to “toy” language, Python. (Toy, as in, I almost never finish a Python project, not that the language is a toy)."><meta itemprop="datePublished" content="2020-12-09T00:00:00+00:00" />
<meta itemprop="dateModified" content="2020-12-09T00:00:00+00:00" />
<meta itemprop="wordCount" content="772">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Advent of Swift"/>
<meta name="twitter:description" content="Like so many of my potential readers I’m participating in this year’s advent of code. This presents me with an opportunity to learn Swift, Apple’s app-oriented language and successor to Objective-C. There are always challenges learning a new language, and I expected those, what surprised me was how far Swift is from my daily drivers: JavaScript and PHP, and my go to “toy” language, Python. (Toy, as in, I almost never finish a Python project, not that the language is a toy)."/>

	
  </head>

  <body class="ma0 avenir bg-near-white">

    
   
  

  <header>
    <div class="bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="/" class="f3 fw2 hover-white no-underline white-90 dib">
      
        My New Hugo Site
      
    </a>
    <div class="flex-l items-center">
      

      
      
<div class="ananke-socials">
  
</div>
    </div>
  </div>
</nav>

    </div>
  </header>



    <main class="pb7" role="main">
      
  
  <article class="flex-l flex-wrap justify-between mw8 center ph3">
    <header class="mt4 w-100">
      <aside class="instapaper_ignoref b helvetica tracked">
          
        POSTS
      </aside>
      










  <div id="sharing" class="mt3 ananke-socials">
    
  </div>


      <h1 class="f1 athelas mt3 mb1">Advent of Swift</h1>
      
      <p class="tracked">
          By <strong>
          
              Clayton Salem
          
          </strong>
      </p>
      
      
      
      <time class="f6 mv4 dib tracked" datetime="2020-12-09T00:00:00Z">December 9, 2020</time>
      

      
      
    </header>
    <div class="nested-copy-line-height lh-copy serif f4 nested-links nested-img mid-gray pr4-l w-two-thirds-l"><p>Like so many of my potential readers I’m participating in this year’s <a href="https://adventofcode.com/">advent of code</a>. This presents me with an opportunity to learn Swift, Apple’s app-oriented language and successor to Objective-C. There are always challenges learning a new language, and I expected those, what surprised me was how far Swift is from my daily drivers: JavaScript and PHP, and my go to “toy” language, Python. (Toy, as in, I almost never finish a Python project, not that the language is a toy).</p>
<p>The core of Swift isn’t all that unfamiliar. It falls not too far from the “C family” tree. However, it’s statically typed, and highly abstract, both of which are surprising trip-wires for someone who spends all his time in dynamic languages.</p>
<p>Static typing carries its own set of challenges, but ones that I was more or less prepared for. It’s the abstract nature of Swift and its Core library, Foundation, that are the big surprise. The <a href="https://swift.org/standard-library/#standard-library-preview-package">Swift Foundation</a> lists Foundation under SDK, though in the <a href="https://github.com/apple/swift/tree/main/stdlib/public/Darwin/Foundation">repository</a> it is found in the <code>sdlib</code> directory. However it’s classified, Foundation is where you find both String (Swift’s string primitive) and NSString (Objective-C’s string primitive).</p>
<p>Here’s the kicker: Swift’s String object has a very limited set of methods on it. Check out the documentation here: <a href="https://developer.apple.com/documentation/swift/string">https://developer.apple.com/documentation/swift/string</a>. The methods are at the bottom of the page. For a company that prides itself on design, I’m flabbergasted at the poor design of the documents. It’s really hard to get sense of the String object from the docs. Unlike, say MDN, or php.net where the string methods all live on a sidebar, and can be quickly read. Apple’s documentation hides all the methods at the bottom of the page, and never actually lists them all together. (This is a strong case for a mirror site that lays out the methods in a more user-friendly way.)</p>
<p>Finding the methods was step one, but then I realized, it&rsquo;s missing all the things!</p>
<p>While there’s approximately 40 <code>init</code> methods, there’s no generic <code>find</code>, or <code>indexOf</code> methods. There’s no <code>slice</code> or <code>splice</code> or <code>explode</code>. Regex isn’t even mentioned on the page. Compare that to the available php string methods: <a href="https://www.php.net/manual/en/function.addcslashes.php">https://www.php.net/manual/en/function.addcslashes.php</a> (notice the very handy sidebar of methods… I’m going to keep banging that drum, sorry). Or checkout the methods listed for JavaScript on MDN: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String</a>. So useful, so practical.</p>
<p>This is where Swift’s highly abstract nature hit hard. There are few practical tools to allow you to interact with a very standard data type, String. I’m projecting here, but what I understand from this is not that the creators of Swift don’t want you interacting with Strings, but that they want you to define your own methods for interacting with Strings. This took me about a week to understand.</p>
<p>If you’re familiar with the advent of code, you’ll know there’s a lot of string parsing. The tricky parts are in the algorithm to solve the problems (I assume, I’m stuck around day 5.) But the tricky part for this new Swift coder is just the basics.</p>
<p>So this is part of learning Swift: writing your own extensions for doing the things that need to be done.</p>
<p>I&rsquo;m not getting into Protocols and extensions here, only to briefly say, you write <code>extension</code>s into order to fill in implementation of <code>protocol</code>s. I.e. it&rsquo;s a place to write some practical code.</p>
<p>Following is my cobbled together regex on strings. I’ve done some extensive stack-overflow copy-and pasting in order to Frankenstein the following which adds a few methods: <code>index</code>, <code>endIndex</code>, <code>indices</code>(unused in this code), <code>ranges</code>, and finally <code>regex</code> to our <code>StringProtocol</code>. This allows me to do the following: <code>let match = &quot;abcdefg&quot;.regex(of: &quot;dg&quot;)</code>. I have <em>not</em> tested it extensively, and I have not doubt there are a number of edge or not-so-edge cases where it will fail, but it&rsquo;s a start!</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">import</span> <span style="color:#a6e22e">Foundation</span>

<span style="color:#66d9ef">extension</span> <span style="color:#a6e22e">StringProtocol</span> {
    <span style="color:#66d9ef">func</span> <span style="color:#a6e22e">index</span>&lt;S: StringProtocol&gt;(of string: S, options: String.CompareOptions = []) -&gt; Index?
    {
        range(of: string, options: options)?.lowerBound
    }
    <span style="color:#66d9ef">func</span> <span style="color:#a6e22e">endIndex</span>&lt;S: StringProtocol&gt;(of string: S, options: String.CompareOptions = []) -&gt; Index?
    {
        range(of: string, options: options)?.upperBound
    }
    <span style="color:#66d9ef">func</span> <span style="color:#a6e22e">indices</span>&lt;S: StringProtocol&gt;(of string: S, options: String.CompareOptions = []) -&gt; [Index]
    {
        ranges(of: string, options: options).map(<span style="color:#960050;background-color:#1e0010">\</span>.lowerBound)
    }
    <span style="color:#66d9ef">func</span> <span style="color:#a6e22e">ranges</span>&lt;S: StringProtocol&gt;(of string: S, options: String.CompareOptions = []) -&gt; [Range&lt;Index&gt;]
    {
        <span style="color:#66d9ef">var</span> result: [Range&lt;Index&gt;] = []
        <span style="color:#66d9ef">var</span> startIndex = <span style="color:#66d9ef">self</span>.startIndex
        <span style="color:#66d9ef">while</span> startIndex <span style="color:#f92672">&lt;</span> endIndex,
            <span style="color:#66d9ef">let</span> range = <span style="color:#66d9ef">self</span>[startIndex...]
                .range(of: string, options: options) {
                result.append(range)
                startIndex = range.lowerBound <span style="color:#f92672">&lt;</span> range.upperBound ? range.upperBound :
                    index(range.lowerBound, offsetBy: <span style="color:#ae81ff">1</span>, limitedBy: endIndex) ?? endIndex
        }
        <span style="color:#66d9ef">return</span> result
    }
    <span style="color:#66d9ef">func</span> <span style="color:#a6e22e">regex</span>(of query:String) -&gt; Bool   
    {       
        <span style="color:#66d9ef">let</span> escapedQuery = NSRegularExpression.escapedPattern(<span style="color:#66d9ef">for</span>: query)    
        <span style="color:#66d9ef">let</span> ranges = <span style="color:#66d9ef">self</span>.ranges(of: escapedQuery, options: .regularExpression)       
        <span style="color:#66d9ef">return</span> ranges.count <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>
    }
}

</code></pre></div><ul class="pa0">
  
</ul>
<div class="mt6 instapaper_ignoref">
      
      
      </div>
    </div>

    <aside class="w-30-l mt6-l">




</aside>

  </article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="https://example.org/" >
    &copy;  My New Hugo Site 2021 
  </a>
    <div>
<div class="ananke-socials">
  
</div></div>
  </div>
</footer>

  </body>
</html>
